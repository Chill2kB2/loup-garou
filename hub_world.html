<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="theme-color" content="#07090d" />
  <title>Hub 3D — Loup-Garou</title>
  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="app app-hub" style="padding:0;">

  <!-- HUD -->
  <div id="hudTop">
    <div class="pill">
      <div>
        <div class="title">Hub 3D</div>
        <div id="hudHint" class="small">Clique / touche l’écran pour contrôler la caméra</div>
      </div>
    </div>

    <div class="hudBtns">
      <button id="btnJoystick" class="iconBtn" title="Afficher/Masquer joysticks">Joystick</button>
      <button id="btnPause" class="iconBtn" title="Menu pause">≡</button>
    </div>
  </div>

  <!-- Toast (messages propres, pas console) -->
  <div id="toast"></div>

  <!-- Touch UI -->
  <div id="touchUI" class="hidden">
    <div id="stickMove" class="stick"><div class="knob"></div></div>
    <div id="stickLook" class="stick"><div class="knob"></div></div>
    <button id="btnJump">⤴</button>
  </div>

  <!-- Pause Menu -->
  <div id="pauseOverlay">
    <div class="pauseModal panel">
      <div class="pauseHeader">
        <div>
          <div class="pauseTitle">Pause</div>
          <div class="smallNote">Échap / bouton ≡ pour ouvrir/fermer • Le jeu est figé en pause.</div>
        </div>
        <button id="btnClosePause" class="closeBtn">Reprendre</button>
      </div>

      <div class="tabBar">
        <button class="tabBtn active" data-tab="resume">Reprendre</button>
        <button class="tabBtn" data-tab="options">Options</button>
        <button class="tabBtn" data-tab="skins">Skins</button>
        <button class="tabBtn" data-tab="home">Retour accueil</button>
      </div>

      <div id="tab_resume" class="tabPage">
        <div class="section">
          <h3>Reprendre</h3>
          <div class="row">
            <button id="btnResume" class="btn btn--primary">Reprendre</button>
            <button id="btnResetPos" class="btn">Téléporter au spawn</button>
          </div>
          <div class="smallNote" style="margin-top:10px;">
            Astuce : sur PC, la caméra suit ton personnage. Sur mobile, utilise les joysticks (bouton “Joystick”).
          </div>
        </div>
      </div>

      <div id="tab_options" class="tabPage hidden">
        <div class="section">
          <h3>Options</h3>
          <div class="tabBar" style="margin-top:0">
            <button class="tabBtn active" data-subtab="graphics">Graphiques</button>
            <button class="tabBtn" data-subtab="controls">Commandes</button>
            <button class="tabBtn" data-subtab="audio">Audio</button>
            <button class="tabBtn" data-subtab="gameplay">Jouabilité</button>
          </div>

          <div id="sub_graphics" class="subPage">
            <div class="row2">
              <div class="kv">
                <div class="k">Qualité</div>
                <div class="v">
                  <select id="optQuality" class="select">
                    <option value="low">Basse</option>
                    <option value="med">Moyenne</option>
                    <option value="high" selected>Haute</option>
                  </select>
                </div>
              </div>

              <div class="kv">
                <div class="k">Ombres</div>
                <div class="v">
                  <button id="optShadows" class="toggle">ON</button>
                </div>
              </div>

              <div class="kv">
                <div class="k">FOV</div>
                <div class="v">
                  <input id="optFov" class="select" type="number" min="45" max="85" step="1" value="60" style="width:92px" />
                </div>
              </div>

              <div class="kv">
                <div class="k">Densité (render)</div>
                <div class="v">
                  <select id="optPixelRatio" class="select">
                    <option value="auto" selected>Auto</option>
                    <option value="1">1.0</option>
                    <option value="1.25">1.25</option>
                    <option value="1.5">1.5</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="smallNote" style="margin-top:10px;">
              “Auto” adapte la densité selon l’appareil. Si ça lag, passe Qualité = Basse et Ombres = OFF.
            </div>
          </div>

          <div id="sub_controls" class="subPage hidden">
            <div class="row2">
              <div class="kv">
                <div class="k">Sensibilité caméra</div>
                <div class="v">
                  <input id="optSens" class="select" type="number" min="0.3" max="3" step="0.1" value="1.2" style="width:92px" />
                </div>
              </div>

              <div class="kv">
                <div class="k">Inverser Y</div>
                <div class="v">
                  <button id="optInvertY" class="toggle">OFF</button>
                </div>
              </div>

              <div class="kv">
                <div class="k">Remap touches</div>
                <div class="v">
                  <button id="btnRebind" class="btn">Configurer</button>
                </div>
              </div>

              <div class="kv">
                <div class="k">Mode souris</div>
                <div class="v">
                  <select id="optMouseMode" class="select">
                    <option value="drag" selected>Cliquer + glisser</option>
                    <option value="lock">Pointer Lock (clic)</option>
                  </select>
                </div>
              </div>
            </div>

            <div id="rebindPanel" class="section hidden" style="margin-top:12px;">
              <h3>Remap</h3>
              <div class="smallNote">Clique sur une action puis appuie sur la touche.</div>
              <div id="rebindList" class="row2" style="margin-top:10px;"></div>
              <div class="row" style="margin-top:10px;">
                <button id="btnResetBinds" class="btn">Réinitialiser</button>
                <button id="btnCloseRebind" class="btn btn--primary">Terminer</button>
              </div>
            </div>
          </div>

          <div id="sub_audio" class="subPage hidden">
            <div class="row2">
              <div class="kv">
                <div class="k">Volume global</div>
                <div class="v"><input id="optVolMaster" class="select" type="number" min="0" max="100" step="1" value="70" style="width:92px" /></div>
              </div>
              <div class="kv">
                <div class="k">Ambiance</div>
                <div class="v"><input id="optVolAmb" class="select" type="number" min="0" max="100" step="1" value="60" style="width:92px" /></div>
              </div>
              <div class="kv">
                <div class="k">Effets</div>
                <div class="v"><input id="optVolSfx" class="select" type="number" min="0" max="100" step="1" value="80" style="width:92px" /></div>
              </div>
              <div class="kv">
                <div class="k">Voix (plus tard)</div>
                <div class="v"><button class="toggle" disabled style="opacity:.55">Bientôt</button></div>
              </div>
            </div>
            <div class="smallNote" style="margin-top:10px;">
              Audio “réel” (sons 3D + voix) on le branchera après. Là on stocke juste tes réglages.
            </div>
          </div>

          <div id="sub_gameplay" class="subPage hidden">
            <div class="row2">
              <div class="kv">
                <div class="k">Déplacement relatif caméra</div>
                <div class="v"><button id="optMoveRel" class="toggle">ON</button></div>
              </div>
              <div class="kv">
                <div class="k">Sprint</div>
                <div class="v">
                  <select id="optSprintMode" class="select">
                    <option value="hold" selected>Maintenir</option>
                    <option value="toggle">Toggle</option>
                  </select>
                </div>
              </div>
              <div class="kv">
                <div class="k">Dash (esquive)</div>
                <div class="v"><button id="optDash" class="toggle">ON</button></div>
              </div>
              <div class="kv">
                <div class="k">Afficher joysticks sur mobile</div>
                <div class="v"><button id="optAutoJoy" class="toggle">ON</button></div>
              </div>
            </div>

            <div class="smallNote" style="margin-top:10px;">
              Dash = petit boost bref (cooldown). Sprint est vraiment plus rapide.
            </div>
          </div>
        </div>
      </div>

      <div id="tab_skins" class="tabPage hidden">
        <div class="section">
          <h3>Skins</h3>
          <div class="smallNote">Choisis ton avatar. (Pour l’instant : Humanoïde + Fox.)</div>
          <div id="skinsGrid" class="row2" style="margin-top:10px;"></div>

          <div class="row2" style="margin-top:12px;">
            <div class="kv">
              <div class="k">Taille (raisonnable)</div>
              <div class="v"><input id="optScale" class="select" type="number" min="0.8" max="1.2" step="0.05" value="1.0" style="width:92px" /></div>
            </div>
            <div class="kv">
              <div class="k">Couleur tenue (placeholder)</div>
              <div class="v">
                <select id="optColor" class="select">
                  <option value="#7c5cff" selected>Violet</option>
                  <option value="#46ddff">Cyan</option>
                  <option value="#43d17a">Vert</option>
                  <option value="#ffb020">Orange</option>
                  <option value="#ff5c5c">Rouge</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="tab_home" class="tabPage hidden">
        <div class="section">
          <h3>Retour accueil</h3>
          <div class="smallNote">Tu quittes le Hub et reviens à l’accueil.</div>
          <div class="row" style="margin-top:10px;">
            <button id="btnGoHome" class="btn btn--primary">Retour accueil</button>
            <button id="btnStay" class="btn">Rester</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="three.min.js"></script>
  <script src="GLTFLoader.js"></script>
  <script src="hub_world.js"></script>
</body>
</html>
